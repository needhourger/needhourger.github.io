<!doctype html><html lang=zh-cn>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="概述   本文记录一些有关python高阶爬虫selenium+浏览器爬虫操作的踩坑记录.
  selenium
本质是一个为了自动化测试而诞生的工具,但没想到ta自身作为一个爬虫也是极具优势的.
selenium简单的说就是通过各种webdirver驱动去控制浏览器去访问网站,完成各种操作,从而达到爬取数据的目的.可以有效的规避多数反爬虫机制,列如用js动态生成的网站
   
"><title>高阶爬虫selenium摘记</title>
<link rel=canonical href=https://blog.yuukisama.cc/p/%E9%AB%98%E9%98%B6%E7%88%AC%E8%99%ABselenium%E6%91%98%E8%AE%B0/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="高阶爬虫selenium摘记">
<meta property="og:description" content="概述   本文记录一些有关python高阶爬虫selenium+浏览器爬虫操作的踩坑记录.
  selenium
本质是一个为了自动化测试而诞生的工具,但没想到ta自身作为一个爬虫也是极具优势的.
selenium简单的说就是通过各种webdirver驱动去控制浏览器去访问网站,完成各种操作,从而达到爬取数据的目的.可以有效的规避多数反爬虫机制,列如用js动态生成的网站
   
">
<meta property="og:url" content="https://blog.yuukisama.cc/p/%E9%AB%98%E9%98%B6%E7%88%AC%E8%99%ABselenium%E6%91%98%E8%AE%B0/">
<meta property="og:site_name" content="零碎记忆">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Python"><meta property="article:tag" content="爬虫"><meta property="article:tag" content="selenium"><meta property="article:published_time" content="2019-03-08T14:46:18+00:00"><meta property="article:modified_time" content="2019-03-08T14:46:18+00:00">
<meta name=twitter:site content="@Yukiricc">
<meta name=twitter:creator content="@Yukiricc"><meta name=twitter:title content="高阶爬虫selenium摘记">
<meta name=twitter:description content="概述   本文记录一些有关python高阶爬虫selenium+浏览器爬虫操作的踩坑记录.
  selenium
本质是一个为了自动化测试而诞生的工具,但没想到ta自身作为一个爬虫也是极具优势的.
selenium简单的说就是通过各种webdirver驱动去控制浏览器去访问网站,完成各种操作,从而达到爬取数据的目的.可以有效的规避多数反爬虫机制,列如用js动态生成的网站
   
">
<link rel="shortcut icon" href=img/favicon.png>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>返回</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/categories/python/>
Python
</a>
<a href=/categories/%E7%88%AC%E8%99%AB/>
爬虫
</a>
</header>
<h2 class=article-title>
<a href=/p/%E9%AB%98%E9%98%B6%E7%88%AC%E8%99%ABselenium%E6%91%98%E8%AE%B0/>高阶爬虫selenium摘记</a>
</h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Mar 08, 2019</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
阅读时长: 1 分钟
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h2 id=概述>概述</h2>
<ul>
<li>
<p>本文记录一些有关python高阶爬虫selenium+浏览器爬虫操作的踩坑记录.</p>
</li>
<li>
<p>selenium</p>
<p>本质是一个为了自动化测试而诞生的工具,但没想到ta自身作为一个爬虫也是极具优势的.</p>
<p>selenium简单的说就是通过各种webdirver驱动去控制浏览器去访问网站,完成各种操作,从而达到爬取数据的目的.可以有效的规避多数反爬虫机制,列如用js动态生成的网站</p>
</li>
</ul>
<p><figure class=gallery-image style=flex-grow:192;flex-basis:461px>
<a href=/p/%E9%AB%98%E9%98%B6%E7%88%AC%E8%99%ABselenium%E6%91%98%E8%AE%B0/selenium.jpeg data-size=1280x666>
<img src=/p/%E9%AB%98%E9%98%B6%E7%88%AC%E8%99%ABselenium%E6%91%98%E8%AE%B0/selenium.jpeg width=1280 height=666 srcset="/p/%E9%AB%98%E9%98%B6%E7%88%AC%E8%99%ABselenium%E6%91%98%E8%AE%B0/selenium_hu1a85fdc8012b385a5c1655565cef00ab_85451_480x0_resize_q75_box.jpeg 480w, /p/%E9%AB%98%E9%98%B6%E7%88%AC%E8%99%ABselenium%E6%91%98%E8%AE%B0/selenium_hu1a85fdc8012b385a5c1655565cef00ab_85451_1024x0_resize_q75_box.jpeg 1024w" loading=lazy>
</a>
</figure></p>
<h2 id=start>Start</h2>
<p>python version:3.5+</p>
<p>browser:Chrome</p>
<p>webdriver:chromedriver</p>
<p>platform:Windows 10</p>
<ol>
<li>
<p>首先安装selenium包</p>
<pre tabindex=0><code>pip install selenium
</code></pre></li>
<li>
<p>在命令行中尝试引入selenium库,如果不报错证明安装成功</p>
<pre tabindex=0><code>import selenium
</code></pre></li>
<li>
<p>依据你准备选用的浏览器下载对应版本的webdriver.本文以chrome浏览器为例,依据chrome浏览器版本下载对应的chromedriver</p>
<p><a class=link href=https://npm.taobao.org/mirrors/chromedriver target=_blank rel=noopener>chromedriver download</a></p>
<ul>
<li>
<p>关于webdriver的配置.</p>
<p>webdriver事实上是一个可执行文件,为了能够让程序调用它,所以需要配置其环境变量.win下最偷懒的方法自然是把ta丢进system32里.</p>
<p>当然有高阶操作可以装载指定目录中的webdriver,以及可以指定浏览器可执行文件目录等,这部分操作参见自定义webdriver以及浏览器可执行文件</p>
</li>
</ul>
</li>
<li>
<p>让我们开始第一个例子打开百度首页</p>
<pre tabindex=0><code>#-*- coding:utf-8 -*-
# 从selenium包中导入webdriver
from selenium import webdriver   

# 声明一个chrome对象
dirver=webdriver.Chrome()            

# 用chrome打开百度首页
driver.get(&quot;https://www.baidu.com/&quot;) 
</code></pre></li>
<li>
<p><a class=link href=https://blog.csdn.net/yj1556492839/article/details/79671008 target=_blank rel=noopener>更多基础操作</a></p>
<p><del>容我偷个懒</del></p>
</li>
</ol>
<h2 id=advance>Advance</h2>
<p><del>其实也就是一系列踩坑行为</del></p>
<ol>
<li>
<h3 id=自定义webdriver以及浏览器可执行文件>自定义webdriver以及浏览器可执行文件</h3>
<pre tabindex=0><code>#-*- coding:utf-8 -*-
from selenium import webdirver

# 声明一个chrome设置对象
options=webdriver.ChromeOptions()

# 指定浏览器可执行文件路径
options._binary_location=&quot;./Application/chrome.exe&quot;

# 利用chrome设置对形象作为参数初始化webdriver对象,executable_path即webdriver路径
chrome=webdriver.Chrome(chrome_options=options,executable_path=&quot;./chromedriver.exe&quot;)

# 打开百度首页
chrome.get(&quot;https://www.baidu.com/&quot;)

</code></pre></li>
</ol>
<ul>
<li><strong>不指定浏览器可执行文件目录,默认启动系统浏览器.个人拙见为了软件的移植性下载32位版本的二进制可执行文件放在脚本下属目录,使用参数指定浏览器可执行文件路径</strong></li>
</ul>
<ol>
<li>
<h3 id=设置浏览器启动参数>设置浏览器启动参数</h3>
<ul>
<li>
<p>普通参数</p>
<pre tabindex=0><code>#-*- coding:utf-8 -*-
from selenium import webdirver

# 声明一个chrome设置对象
options=webdriver.ChromeOptions()

# 禁用gpu加速
options.add_argument(&quot;--disable-gpu&quot;)
# 允许加载不安全内容
options.add_argument('--allow-running-insecure-content')
# 禁用插件
options.add_argument('--disable-extensions')
# 使用无头浏览器,即不显示浏览器图形化界面,适用于没有图形化界面的服务器
options.add_argument('--headless')

chrome=webdriver.Chrome(chrome_options=options)
</code></pre></li>
<li>
<p>实验性参数</p>
<pre tabindex=0><code>appState = { 
    &quot;recentDestinations&quot;: [ { 
        &quot;id&quot;: &quot;Save as PDF&quot;, 
        &quot;origin&quot;: &quot;local&quot; 
    } ], 
    &quot;selectedDestinationId&quot;: &quot;Save as PDF&quot;, 
    &quot;version&quot;: 2
} 

profile = {
    'printing.print_preview_sticky_settings.appState': json.dumps(appState)
} 

options.add_experimental_option(&quot;prefs&quot;,profile)

</code></pre></li>
<li>
<p><a class=link href=https://peter.sh/experiments/chromium-command-line-switches/ target=_blank rel=noopener>更多启动参数设置参见文档</a></p>
</li>
</ul>
</li>
<li>
<p>执行JavaScript脚本</p>
<pre tabindex=0><code>#-*- coding:utf-8 -*-
from selenium import webdirver


chrome=webdriver.Chrome()
# 设置js代码执行超时时间
chrome.set_script_timeout(30)
chrome.get(&quot;http://www.baidu.com/&quot;)

# 异步执行js代码
chrome.execute_script(&quot;alert(&quot;Halloworld&quot;);&quot;)
# 阻塞执行js代码
chrome.execute_async_script(&quot;alert(&quot;halloworld&quot;);&quot;)
</code></pre><ul>
<li>execute_script函数是异步执行js代码.</li>
<li>execute_async_script是阻塞执行,即会等待js执行完成再执行接下来的程序.</li>
<li>set_script_timeout是设置js执行超时时间,对于阻塞执行的js代码,在timeout设定的时间内没有能够完成将强行终止.这个timeout值默认是30s</li>
</ul>
</li>
</ol>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/python/>Python</a>
<a href=/tags/%E7%88%AC%E8%99%AB/>爬虫</a>
<a href=/tags/selenium/>selenium</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>相关文章</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/p/python-requests-ssl%E6%8A%A5%E9%94%99/>
<div class=article-details>
<h2 class=article-title>Python requests ssl报错</h2>
</div>
</a>
</article>
<article>
<a href=/p/word2vec%E8%AF%8D%E5%90%91%E9%87%8F%E8%AE%AD%E7%BB%83/>
<div class=article-details>
<h2 class=article-title>word2vec词向量训练</h2>
</div>
</a>
</article>
<article>
<a href=/p/python%E5%B8%B8%E7%94%A8skill/>
<div class=article-details>
<h2 class=article-title>Python常用Skill</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<footer class=site-footer>
<section class=copyright>
&copy;
2017 -
2021 零碎记忆
</section>
<section class=powerby>
Try to remember <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.5.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">目录</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#概述>概述</a></li>
<li><a href=#start>Start</a></li>
<li><a href=#advance>Advance</a>
<ol>
<li><a href=#自定义webdriver以及浏览器可执行文件>自定义webdriver以及浏览器可执行文件</a></li>
<li><a href=#设置浏览器启动参数>设置浏览器启动参数</a></li>
</ol>
</li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>